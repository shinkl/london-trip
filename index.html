<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>倫敦行旅 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Noto+Serif+TC:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 'royal-navy': '#0F172A', 'british-red': '#8B0000', 'antique-gold': '#C5A065', 'parchment': '#F9F7F2' },
                    fontFamily: { serif: ['"Noto Serif TC"', 'serif'], cinzel: ['"Cinzel"', 'serif'], sans: ['"Lato"', 'sans-serif'] }
                }
            }
        }
    </script>
    <style>
        body { background-color: #F9F7F2; color: #0F172A; font-family: 'Lato', sans-serif; overflow: hidden; height: 100dvh; }
        .tab-content { display: none; height: calc(100dvh - 160px); overflow-y: auto; }
        .tab-content.active { display: block; }
        .glass-nav { background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
        .hide-scroll::-webkit-scrollbar { display: none; }
        #detail-modal { transition: opacity 0.3s; }
        #detail-modal.hidden { opacity: 0; pointer-events: none; }
        #detail-modal.visible { opacity: 1; pointer-events: auto; }
        .weather-card { background: linear-gradient(135deg, #1e293b 0%, #334155 100%); }
    </style>
</head>
<body class="flex flex-col">

    <header class="bg-royal-navy text-white pt-10 pb-4 px-6 shrink-0 shadow-lg">
        <div class="flex justify-between items-end">
            <div>
                <h1 class="font-cinzel text-2xl tracking-widest text-antique-gold">LONDON</h1>
                <p class="text-xs opacity-70">2026 February Travel Plan</p>
            </div>
            <i class="fa-solid fa-crown text-antique-gold text-xl"></i>
        </div>
    </header>

    <main id="main-container" class="flex-1 hide-scroll">
        
        <div id="plan" class="tab-content active px-4 py-6 space-y-4">
            <div class="bg-white rounded-xl shadow-md p-4 border-l-4 border-antique-gold" onclick="window.open('https://www.google.com/maps/search/?api=1&query=395+Oxford+St+London', '_blank')">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-hotel text-antique-gold"></i>
                    <div>
                        <h4 class="font-bold text-sm">倫敦住宿 (Oxford St)</h4>
                        <p class="text-[10px] text-gray-500">395 Oxford St, London W1C 2JX</p>
                    </div>
                </div>
            </div>
            <div id="itinerary-list" class="space-y-6"></div>
        </div>

        <div id="guide" class="tab-content px-4 py-6">
            <div class="grid grid-cols-1 gap-6" id="guide-list"></div>
        </div>

        <div id="lists" class="tab-content px-4 py-6">
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="bg-royal-navy p-4 flex justify-between items-center">
                    <h3 class="text-white font-bold"><i class="fa-solid fa-list-check mr-2"></i>行李清單</h3>
                    <span id="list-count" class="text-antique-gold text-xs font-mono">0/0</span>
                </div>
                <div class="p-4 space-y-3">
                    <div class="flex gap-2 mb-4">
                        <input type="text" id="new-item-input" placeholder="新增物品..." class="flex-1 bg-gray-100 border-none rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-antique-gold outline-none">
                        <button onclick="addItem()" class="bg-royal-navy text-white px-4 py-2 rounded-lg text-sm"><i class="fa-solid fa-plus"></i></button>
                    </div>
                    <div id="editable-list" class="space-y-2"></div>
                </div>
            </div>
        </div>

        <div id="info" class="tab-content px-4 py-6 space-y-6">
            <div class="weather-card rounded-2xl p-5 text-white shadow-xl">
                <div class="flex justify-between items-center">
                    <div>
                        <h3 class="text-lg font-bold">倫敦即時天氣</h3>
                        <p class="text-xs text-antique-gold" id="weather-desc">正在讀取...</p>
                    </div>
                    <div class="text-right">
                        <span class="text-4xl font-light" id="weather-temp">--°</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-md p-5 border-t-4 border-british-red">
                <h3 class="font-bold text-royal-navy mb-4 flex items-center">
                    <i class="fa-solid fa-building-columns mr-2 text-british-red"></i>駐英國台北代表處
                </h3>
                <div class="space-y-4 text-sm">
                    <div class="flex items-start gap-3">
                        <i class="fa-solid fa-phone mt-1 text-gray-400"></i>
                        <a href="tel:+442078812650" class="text-blue-600 font-mono">(44) 20-7881-2650</a>
                    </div>
                    <div class="flex items-start gap-3">
                        <i class="fa-solid fa-map-location-dot mt-1 text-gray-400"></i>
                        <span onclick="window.open('https://www.google.com/maps/search/?api=1&query=46-48+Grosvenor+Gardens+London', '_blank')">46-48 Grosvenor Gardens, London SW1W 0EB</span>
                    </div>
                    <div class="flex items-start gap-3">
                        <i class="fa-solid fa-clock mt-1 text-gray-400"></i>
                        <span>週一至週五 09:00 - 17:00</span>
                    </div>
                    <div class="flex items-start gap-3">
                        <i class="fa-solid fa-envelope mt-1 text-gray-400"></i>
                        <a href="mailto:gbr@mofa.gov.tw" class="text-blue-600">gbr@mofa.gov.tw</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="detail-modal" class="fixed inset-0 z-[100] hidden flex items-end">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="bg-parchment w-full h-[85vh] rounded-t-3xl relative z-10 flex flex-col overflow-hidden shadow-2xl">
            <div id="modal-img" class="h-60 w-full bg-cover bg-center shrink-0"></div>
            <div class="p-6 overflow-y-auto flex-1">
                <h2 id="modal-title" class="text-2xl font-serif font-bold mb-2"></h2>
                <div id="modal-content" class="text-sm leading-relaxed text-gray-700 space-y-4"></div>
            </div>
            <button onclick="closeModal()" class="absolute top-4 right-4 bg-black/30 text-white w-8 h-8 rounded-full"><i class="fa-solid fa-xmark"></i></button>
        </div>
    </div>

    <nav class="glass-nav fixed bottom-0 w-full pb-8 z-50">
        <div class="flex justify-around items-center h-16">
            <button onclick="switchTab('plan')" class="nav-btn text-antique-gold flex flex-col items-center flex-1"><i class="fa-solid fa-calendar-day"></i><span class="text-[10px] mt-1">行程</span></button>
            <button onclick="switchTab('guide')" class="nav-btn text-gray-500 flex flex-col items-center flex-1"><i class="fa-solid fa-map-location-dot"></i><span class="text-[10px] mt-1">導覽</span></button>
            <button onclick="switchTab('lists')" class="nav-btn text-gray-500 flex flex-col items-center flex-1"><i class="fa-solid fa-clipboard-list"></i><span class="text-[10px] mt-1">清單</span></button>
            <button onclick="switchTab('info')" class="nav-btn text-gray-500 flex flex-col items-center flex-1"><i class="fa-solid fa-circle-info"></i><span class="text-[10px] mt-1">資訊</span></button>
        </div>
    </nav>

    <script>
        // 導覽資料
        const guideData = [
            { id:1, title:'倫敦塔', img:'https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?auto=format&fit=crop&w=800', content:'英國歷史最悠久的堡壘，保存著珍貴的皇冠珠寶。' },
            { id:2, title:'倫敦塔橋', img:'https://images.unsplash.com/photo-1543733351-11bf5a74b273?auto=format&fit=crop&w=800', content:'壯觀的維多利亞風格開合橋，是倫敦的地標。' },
            { id:3, title:'大英博物館', img:'https://images.unsplash.com/photo-1518976024611-28bf4b48222e?auto=format&fit=crop&w=800', content:'世界三大博物館之一，必看羅塞塔石碑與木乃伊。' },
            { id:4, title:'西敏寺', img:'https://images.unsplash.com/photo-1543733351-11bf5a74b273?auto=format&fit=crop&w=800', content:'歷代君主加冕之地，埋葬著無數文學與科學大師。' },
            { id:5, title:'波羅市場', img:'https://images.unsplash.com/photo-1533900298318-6b8da08a523e?auto=format&fit=crop&w=800', content:'倫敦最古老的美食市場，推薦生蠔與甜甜圈。' }
        ];

        // 切換分頁
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.replace('text-antique-gold', 'text-gray-500'));
            event.currentTarget.classList.replace('text-gray-500', 'text-antique-gold');
        }

        // 天氣 API (使用 Open-Meteo 免費 API)
        async function fetchWeather() {
            try {
                const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=51.5074&longitude=-0.1278&current_weather=true');
                const data = await res.json();
                document.getElementById('weather-temp').innerText = `${Math.round(data.current_weather.temperature)}°C`;
                document.getElementById('weather-desc').innerText = `目前倫敦風速 ${data.current_weather.windspeed} km/h`;
            } catch (e) { document.getElementById('weather-desc').innerText = '天氣讀取失敗'; }
        }

        // 清單功能
        let items = JSON.parse(localStorage.getItem('trip-items') || '["護照", "英鎊現金", "轉接頭"]');
        function renderItems() {
            const list = document.getElementById('editable-list');
            list.innerHTML = items.map((item, i) => `
                <div class="flex justify-between items-center bg-gray-50 p-3 rounded-lg border border-gray-100">
                    <span class="text-sm font-medium">${item}</span>
                    <button onclick="removeItem(${i})" class="text-red-400"><i class="fa-solid fa-trash-can"></i></button>
                </div>
            `).join('');
            document.getElementById('list-count').innerText = `${items.length} 項目`;
            localStorage.setItem('trip-items', JSON.stringify(items));
        }
        function addItem() {
            const input = document.getElementById('new-item-input');
            if(input.value) { items.push(input.value); input.value = ''; renderItems(); }
        }
        function removeItem(i) { items.splice(i, 1); renderItems(); }

        // 導覽渲染
        function renderGuide() {
            document.getElementById('guide-list').innerHTML = guideData.map(d => `
                <div class="bg-white rounded-xl shadow-md overflow-hidden" onclick="openModal(${d.id})">
                    <div class="h-40 bg-cover bg-center" style="background-image:url('${d.img}')"></div>
                    <div class="p-3 font-bold text-sm">${d.title}</div>
                </div>
            `).join('');
        }

        function openModal(id) {
            const d = guideData.find(x => x.id === id);
            document.getElementById('modal-title').innerText = d.title;
            document.getElementById('modal-content').innerText = d.content;
            document.getElementById('modal-img').style.backgroundImage = `url('${d.img}')`;
            document.getElementById('detail-modal').classList.replace('hidden', 'visible');
        }
        function closeModal() { document.getElementById('detail-modal').classList.replace('visible', 'hidden'); }

        window.onload = () => { renderItems(); renderGuide(); fetchWeather(); };
    </script>
</body>
</html>
